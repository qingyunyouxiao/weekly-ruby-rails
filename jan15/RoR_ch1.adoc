= RoR第一章
作者：清云游霄 <55185354@qq.com>

== 什么是RoR
Ruby的起源可以追溯到1995年，由松本幸弘（有时简称“Matz”）首次创造。

松本曾与一位朋友谈论Perl和Python这两种对Ruby影响极大的语言的局限性，以及他一次又一次遇到的问题。
Ruby或多或少就是从这次对话中显现出来的，是一种旨在以简洁、专注且易于理解的语言形式解决这些缺点。

最初，Ruby的文献只有日语，所以语言并没有传播到日本以外的太多地区。
但是在2000年代初，松本创建了一个英文网站和邮件列表，Ruby成为许多开发者的首选工具。

RoR是Ruby on Rails的缩写，诞生于2005年。
37signals（该项目后来成为了Basecamp）公司的程序员David Heinemeier Hansson，在开发项目管理工具时使用Ruby开发出了Rails。
作为Ruby语言的自然延伸而出现，Rails侧重于开发者的需求和开发者的满意度，在Web领域引起了广泛的关注。

== 首次安装
要使用RoR，需要安装Ruby环境（需要安装MSYS2等等），这些选择可供参考。

* RoR 8 
* Ruby 4.0
* VSCode
* AsciiDoc & AsciiDoctor

可以在浏览器中搜索得到。需要注意的是，安装好Ruby后要在VSCode设置配置好ruby.exe的路径。

.setting.json
[source,json]
----
"rubyLsp.rubyExecutablePath": "D:\\Downloads\\Ruby40-x64\\bin\\ruby.exe",
----

根据个人需要，在VSCode中修改注释设置，空字符串表示正体（移除斜体）。

.setting.json
[source,json]
----
"editor.tokenColorCustomizations": {
    "textMateRules": [
        {
            "scope": "comment",
            "settings": {
                "fontStyle": ""  
            }
        }
    ]
},
----

<<<
---

以下命令用于创建Rails演示项目，安装依赖项，启动Rails服务器（端口为3001）和初始化数据库。

.cmd
----
rails new demo

bundle install 

rails server -p 3000

rails db:create

rails db:migrate  
----

以下是后续常用的命令（绑定所有ip，生成控制器和模型文件，查看路由，启动控制台，运行测试）。

.cmd
----
rails s -b 0.0.0.0

rails generate controller Welcome index

rails generate model User name:string email:string

rails routes

rails console

rails dbconsole

rails test
----

== Hello World
为了编写我们的Hello World应用程序，我们需要控制器和视图的代码，并且需要一个路由来连接两者。
让我们从创建一个简单的应用程序开始，将我们愉快的问候发送到浏览器。
等我们把它运行起来后，再给它添加当前时间和链接。

要创建一个名为 say 的控制器，我们确保自己位于 demo 目录下，
然后运行该命令，传入我们想要创建的控制器名称以及我们希望该控制器支持的动作名称：

.cmd
----
rails generate controller Say hello goodbye
----

该命令会记录它所检查的文件和目录，并在向我们的应用程序添加新的Ruby脚本或目录时进行标注。

<<<
---

像任何其他网络应用一样，Rails应用对用户来说似乎与一个URL相关联。
当你在浏览器中输入该URL时，你实际上是在与应用程序代码交互，应用程序会生成响应给你。

这是项目结构示意图。

image::D:\Projects\asciidoctor-work\assets\fig_1_01.png[fig_1_01, width=50%]

总之，完成下面这些代码后，在浏览器中访问URL http://localhost:3000/say/hello。

.app/controllers/say_controller.rb
[source,ruby]
----
class SayController < ApplicationController
  def hello
  end

  def goodbye
  end
end
----